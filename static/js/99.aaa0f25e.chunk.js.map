{"version":3,"sources":["screens/unverifiedHome.js"],"names":["connect","state","auth","dispatch","signOut","type","USER_SIGN_OUT","props","_useState","useState","otp","_useState2","Object","_Users_faisal_Desktop_yantraksh_yantraksh_react_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","setOtp","_useState3","_useState4","phase","setPhase","handleChange","useCallback","event","target","value","checked","name","_objectSpread","_Users_faisal_Desktop_yantraksh_yantraksh_react_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__","resendOTPHandler","_Users_faisal_Desktop_yantraksh_yantraksh_react_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_faisal_Desktop_yantraksh_yantraksh_react_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","wrap","_context","prev","next","resendOTP","toast","success","stop","renderLoadingButton","react__WEBPACK_IMPORTED_MODULE_4___default","createElement","reactstrap__WEBPACK_IMPORTED_MODULE_5__","color","disabled","class","role","aria-hidden","onClick","handleSubmit","_ref2","_callee2","_context2","preventDefault","verifyOTP","window","location","reload","t0","error","_x","apply","this","arguments","className","reactstrap__WEBPACK_IMPORTED_MODULE_6__","reactstrap__WEBPACK_IMPORTED_MODULE_7__","reactstrap__WEBPACK_IMPORTED_MODULE_8__","md","lg","xl","reactstrap__WEBPACK_IMPORTED_MODULE_9__","onSubmit","reactstrap__WEBPACK_IMPORTED_MODULE_10__","reactstrap__WEBPACK_IMPORTED_MODULE_11__","concat","user","username","reactstrap__WEBPACK_IMPORTED_MODULE_12__","reactstrap__WEBPACK_IMPORTED_MODULE_13__","reactstrap__WEBPACK_IMPORTED_MODULE_14__","reactstrap__WEBPACK_IMPORTED_MODULE_15__","reactstrap__WEBPACK_IMPORTED_MODULE_16__","addonType","reactstrap__WEBPACK_IMPORTED_MODULE_17__","reactstrap__WEBPACK_IMPORTED_MODULE_18__","placeholder","onChange","minLength","maxLength","required"],"mappings":"uhBA2IeA,sBARS,SAAAC,GAAK,MAAK,CAC9BC,KAAMD,EAAMC,OAGW,SAAAC,GAAQ,MAAK,CACpCC,QAAS,kBAAMD,EAAS,CAAEE,KAAMC,SAGrBN,CAnHQ,SAAAO,GAAS,IAAAC,EAENC,mBAAS,CAAEC,IAAK,OAFVC,EAAAC,OAAAC,EAAA,EAAAD,CAAAJ,EAAA,GAErBE,EAFqBC,EAAA,GAEhBG,EAFgBH,EAAA,GAAAI,EAIFN,mBAAS,GAJPO,EAAAJ,OAAAC,EAAA,EAAAD,CAAAG,EAAA,GAIrBE,EAJqBD,EAAA,GAIdE,EAJcF,EAAA,GAMtBG,EAAeC,sBACjB,SAAAC,GACI,IAAMC,EAASD,EAAMC,OACfC,EAAwB,aAAhBD,EAAOjB,KAAsBiB,EAAOE,QAAUF,EAAOC,MAC7DE,EAAOH,EAAOG,KACpBX,uVAAMY,CAAA,GACChB,EADDE,OAAAe,EAAA,EAAAf,CAAA,GAEDa,EAAOF,MAGhB,CAACb,EAAKI,IAGJc,EAAmBR,sBAAWR,OAAAiB,EAAA,EAAAjB,CAAAkB,EAAAC,EAAAC,KAChC,SAAAC,IAAA,OAAAH,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACInB,EAAS,GADbiB,EAAAE,KAAA,EAEUC,eAFV,OAGIC,IAAMC,QAAQ,aACdtB,EAAS,GAJb,wBAAAiB,EAAAM,SAAAR,MAMA,CAACf,IAGCwB,EAAsBtB,sBACxB,WACI,OAAc,IAAVH,EAEI0B,EAAAZ,EAAAa,cAACC,EAAA,EAAD,CAAQxC,KAAK,SAASyC,MAAM,OAAOC,UAAQ,GACvCJ,EAAAZ,EAAAa,cAAA,QAAMI,MAAM,mCAAmCC,KAAK,SAASC,cAAY,SAD7E,YAKDP,EAAAZ,EAAAa,cAACC,EAAA,EAAD,CAAQxC,KAAK,SAAS8C,QAASvB,EAAkBkB,MAAM,QAAvD,eAEX,CAAC7B,IAGCmC,EAAehC,sBAAW,eAAAiC,EAAAzC,OAAAiB,EAAA,EAAAjB,CAAAkB,EAAAC,EAAAC,KAC5B,SAAAsB,EAAMjC,GAAN,OAAAS,EAAAC,EAAAG,KAAA,SAAAqB,GAAA,cAAAA,EAAAnB,KAAAmB,EAAAlB,MAAA,cACIhB,EAAMmC,iBADVD,EAAAnB,KAAA,EAAAmB,EAAAlB,KAAA,EAGcoB,aAAU/C,GAHxB,cAAA6C,EAAAlB,KAAA,EAIcE,IAAMC,QAAQ,2BAJ5B,OAKQkB,OAAOC,SAASC,SALxBL,EAAAlB,KAAA,gBAAAkB,EAAAnB,KAAA,EAAAmB,EAAAM,GAAAN,EAAA,SAOQhB,IAAMuB,MAAM,qBAPpB,yBAAAP,EAAAd,SAAAa,EAAA,iBAD4B,gBAAAS,GAAA,OAAAV,EAAAW,MAAAC,KAAAC,YAAA,GAW5B,CAACxD,IAGL,OACIiC,EAAAZ,EAAAa,cAAA,OAAKuB,UAAU,mCACXxB,EAAAZ,EAAAa,cAACwB,EAAA,EAAD,KACIzB,EAAAZ,EAAAa,cAACyB,EAAA,EAAD,CAAKF,UAAU,0BACXxB,EAAAZ,EAAAa,cAAC0B,EAAA,EAAD,CAAKC,GAAG,IAAIC,GAAG,IAAIC,GAAG,KAElB9B,EAAAZ,EAAAa,cAAC8B,EAAA,EAAD,CAAMC,SAAUvB,GACZT,EAAAZ,EAAAa,cAACgC,EAAA,EAAD,CAAMT,UAAU,QACZxB,EAAAZ,EAAAa,cAACiC,EAAA,EAAD,eAAAC,OACevE,EAAML,KAAK6E,KAAKC,WAE/BrC,EAAAZ,EAAAa,cAACqC,EAAA,EAAD,KACItC,EAAAZ,EAAAa,cAACsC,EAAA,EAAD,2CAGAvC,EAAAZ,EAAAa,cAACuC,EAAA,EAAD,qDAGAxC,EAAAZ,EAAAa,cAACwC,EAAA,EAAD,CAAYjB,UAAU,QAClBxB,EAAAZ,EAAAa,cAACyC,EAAA,EAAD,CAAiBC,UAAU,WACvB3C,EAAAZ,EAAAa,cAAC2C,EAAA,EAAD,KACI5C,EAAAZ,EAAAa,cAAA,KAAGuB,UAAU,gBAGrBxB,EAAAZ,EAAAa,cAAC4C,EAAA,EAAD,CAAOnF,KAAK,SACRoF,YAAa,cACbhE,KAAM,MACN0C,UAAW,eACXuB,SAAUvE,EACVI,MAAOb,EAAIA,IACXiF,UAAW,EACXC,UAAW,EACXC,UAAQ,KAGhBlD,EAAAZ,EAAAa,cAACC,EAAA,EAAD,CAAQxC,KAAK,SAASyC,MAAM,WAA5B,UAAsD,IACrDJ,IAAuB,IACxBC,EAAAZ,EAAAa,cAACC,EAAA,EAAD,CAAQxC,KAAK,SAASyC,MAAM,OAAOK,QAAS5C,EAAMH,SAAlD,YAA6E","file":"static/js/99.aaa0f25e.chunk.js","sourcesContent":["import React, { useState, useCallback } from 'react';\nimport {\n    Button,\n    Card,\n    CardHeader,\n    CardTitle,\n    CardText,\n    CardBody,\n    CardFooter,\n    Col,\n    Container,\n    Form,\n    InputGroup,\n    InputGroupAddon,\n    InputGroupText,\n    Input,\n    Row\n} from 'reactstrap';\nimport { toast } from 'react-toastify';\nimport { connect } from \"react-redux\";\nimport { USER_SIGN_OUT } from \"../actions\";\nimport { verifyOTP, resendOTP } from '../helpers/api';\n\n\nconst UnverifiedHome = props => {\n\n    const [otp, setOtp] = useState({ otp: null });\n\n    const [phase, setPhase] = useState(0);\n\n    const handleChange = useCallback(\n        event => {\n            const target = event.target;\n            const value = target.type === 'checkbox' ? target.checked : target.value;\n            const name = target.name;\n            setOtp({\n                ...otp,\n                [name]: value\n            });\n        },\n        [otp, setOtp]\n    )\n\n    const resendOTPHandler = useCallback(\n        async () => {\n            setPhase(1);\n            await resendOTP();\n            toast.success(\"OTP Sent!\");\n            setPhase(0);\n        },\n        [setPhase]\n    )\n\n    const renderLoadingButton = useCallback(\n        () => {\n            if (phase === 1) {\n                return (\n                    <Button type=\"button\" color=\"link\" disabled>\n                        <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span> Loading\n                    </Button>\n                );\n            }\n            return <Button type=\"button\" onClick={resendOTPHandler} color=\"link\">Resend OTP</Button>;\n        },\n        [phase]\n    )\n\n    const handleSubmit = useCallback(\n        async event => {\n            event.preventDefault();\n            try {\n                await verifyOTP(otp);\n                await toast.success(\"Verification Successful\");\n                window.location.reload();\n            } catch (err) {\n                toast.error(\"Sorry, Wrong OTP!\");\n            }\n        },\n        [otp]\n    )\n\n    return (\n        <div className=\"app flex-row align-items-center\">\n            <Container>\n                <Row className=\"justify-content-center\">\n                    <Col md=\"9\" lg=\"7\" xl=\"6\">\n\n                        <Form onSubmit={handleSubmit}>\n                            <Card className=\"mx-4\">\n                                <CardHeader>\n                                    {`Hello, ${props.auth.user.username}`}\n                                </CardHeader>\n                                <CardBody>\n                                    <CardTitle>\n                                        We've sent an OTP to your Company.\n                                </CardTitle>\n                                    <CardText>\n                                        Please enter the OTP below for verification.\n                                </CardText>\n                                    <InputGroup className=\"mb-3\">\n                                        <InputGroupAddon addonType=\"prepend\">\n                                            <InputGroupText>\n                                                <i className=\"icon-lock\" />\n                                            </InputGroupText>\n                                        </InputGroupAddon>\n                                        <Input type=\"number\"\n                                            placeholder={'6 Digit OTP'}\n                                            name={\"otp\"}\n                                            className={\"form-control\"}\n                                            onChange={handleChange}\n                                            value={otp.otp}\n                                            minLength={6}\n                                            maxLength={6}\n                                            required\n                                        />\n                                    </InputGroup>\n                                    <Button type=\"submit\" color=\"primary\">Verify</Button>{\" \"}\n                                    {renderLoadingButton()}{\" \"}\n                                    <Button type=\"button\" color=\"link\" onClick={props.signOut}>Sign Out</Button>{\" \"}\n                                </CardBody>\n                            </Card>\n                        </Form>\n\n                    </Col>\n                </Row>\n            </Container>\n        </div>\n    )\n}\n\n\nconst mapStateToProps = state => ({\n    auth: state.auth\n});\n\nconst mapDispatchToProps = dispatch => ({\n    signOut: () => dispatch({ type: USER_SIGN_OUT })\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UnverifiedHome);"],"sourceRoot":""}