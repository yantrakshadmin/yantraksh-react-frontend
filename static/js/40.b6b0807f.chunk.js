(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{625:function(e,t,a){"use strict";a.r(t);var n=a(20),c=a(11),r=a(3),i=a.n(r),o=a(6),l=a(111),s=a(0),u=a.n(s),m=a(137),_=a(138),v=a(135),d=a(117),p=a(124),E=a(134),b=a(125),h=a(133),f=a(119),y=a(120),O=a(139),j=a(127),g=a(128),C=a(116),k=a(28),w=a(18),S=a(24);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach(function(t){Object(c.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}t.default=function(e){var t=Object(s.useState)({invoice_quiz:"",customer_name_id:"",invoice_number:"",invoice_date:"",invoice_due_date:"",place_of_supply:"",service_month:"",invoice_transactions:[],company_notes:"",terms_and_conditions:""}),a=Object(l.a)(t,2),r=a[0],x=a[1],q=Object(s.useState)({invoice_transaction_desc:"",invoice_transaction_lr:"",invoice_transaction_vehicle:"",invoice_transaction_date:"",invoice_transaction_qty:0,invoice_transaction_rate:0,invoice_transaction_gst:0,invoice_transaction_amount:0}),D=Object(l.a)(q,2),F=D[0],I=D[1];Object(s.useEffect)(function(){e.match.params.id&&function(){var t=Object(o.a)(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.sb)(e.match.params.id);case 2:(a=t.sent).customer_name?x({invoice_quiz:a.invoice_quiz,customer_name_id:a.customer_name.id,invoice_number:a.invoice_number,invoice_date:a.invoice_date,invoice_due_date:a.invoice_due_date,place_of_supply:a.place_of_supply,service_month:a.service_month,invoice_transactions:a.invoice_transactions,company_notes:a.company_notes,terms_and_conditions:a.terms_and_conditions}):a.invoice_quiz&&x({invoice_quiz:a.invoice_quiz,customer_name_id:a.customer_name,invoice_number:a.invoice_number,invoice_date:a.invoice_date,invoice_due_date:a.invoice_due_date,place_of_supply:a.place_of_supply,service_month:a.service_month,invoice_transactions:a.invoice_transactions,company_notes:a.company_notes,terms_and_conditions:a.terms_and_conditions});case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[]);var P=Object(s.useState)([]),N=Object(l.a)(P,2),A=N[0],T=N[1],V=Object(s.useState)([]),J=Object(l.a)(V,2),R=J[0],G=J[1];Object(s.useEffect)(function(){var e=function(){var e=Object(o.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.cb)();case 2:t=e.sent,T(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(o.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.eb)();case 2:t=e.sent,G(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();e(),t()},[]);var L=Object(s.useState)(0),M=Object(l.a)(L,2),Q=M[0],U=M[1],X=Object(s.useCallback)(function(e){if(e.length>0)return e.map(function(e){return u.a.createElement("option",{key:e.id,value:e.id},e.primary_contact," | ",e.company_name)})},[]),Y=Object(s.useCallback)(function(){return r.invoice_quiz?u.a.createElement(m.a,null,u.a.createElement(_.a,null,"Customer Name*"),u.a.createElement(v.a,{type:"text",value:"".concat(r.invoice_quiz.get_shipper.shipper_fname," ").concat(r.invoice_quiz.get_shipper.shipper_lname),disabled:!0})):u.a.createElement(m.a,null,u.a.createElement(_.a,{htmlFor:"customer_name_id"},"Customer Name*"),u.a.createElement(v.a,{type:"select",name:"customer_name_id",id:"customer_name_id",value:r.customer_name_id,onChange:H,required:!0},u.a.createElement("option",{value:"",defaultValue:!0},"Select Customer"),X(A)))},[r]),B=Object(s.useCallback)(function(e){if(e.length>0)return e.map(function(e){return u.a.createElement("option",{key:e.id,value:"".concat(e.name," | ").concat(e.type)},e.name," | ",e.type)})},[]),H=Object(s.useCallback)(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;x(z({},r,Object(c.a)({},n,a)))},[r,x]),K=Object(s.useCallback)(function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;I(z({},F,Object(c.a)({},n,a)))},[F,I]),W=Object(s.useCallback)(function(e,t,a){return parseFloat(e)*parseFloat(t)+parseFloat(a)},[parseFloat]),Z=Object(s.useCallback)(Object(o.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=W(F.invoice_transaction_qty,F.invoice_transaction_rate,F.invoice_transaction_gst),x(z({},r,{invoice_transactions:[].concat(Object(n.a)(r.invoice_transactions),[z({},F,{invoice_transaction_amount:t})])})),I({invoice_transaction_desc:"",invoice_transaction_lr:0,invoice_transaction_vehicle:"",invoice_transaction_date:"",invoice_transaction_qty:0,invoice_transaction_rate:0,invoice_transaction_gst:0,invoice_transaction_amount:0});case 3:case"end":return e.stop()}},e)})),[r,x,F,I]),$=Object(s.useCallback)(function(){var e=Object(o.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:x(z({},r,"id"in t?{invoice_transactions:r.invoice_transactions.filter(function(e){return e.id!==t.id})}:{invoice_transactions:r.invoice_transactions.filter(function(e){return e.cp_name!==t.cp_name})}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[r,x]),ee=Object(s.useCallback)(function(){if(r.invoice_transactions)return r.invoice_transactions.map(function(e,t){return u.a.createElement("tr",{key:t},u.a.createElement("td",null,e.invoice_transaction_desc),u.a.createElement("td",null,e.invoice_transaction_lr),u.a.createElement("td",null,e.invoice_transaction_vehicle),u.a.createElement("td",null,e.invoice_transaction_date),u.a.createElement("td",null,e.invoice_transaction_qty),u.a.createElement("td",null,e.invoice_transaction_rate),u.a.createElement("td",null,e.invoice_transaction_gst),u.a.createElement("td",null,e.invoice_transaction_amount),u.a.createElement("td",null,u.a.createElement(d.a,{type:"button",title:"Delete Item",onClick:function(){return $(e)},color:"danger",size:"sm"},u.a.createElement(j.a,{icon:g.b}))))})},[r]),te=Object(s.useCallback)(function(){return 1===Q?u.a.createElement(d.a,{color:"primary",size:"lg",disabled:!0},u.a.createElement("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})," Saving"):u.a.createElement(d.a,{type:"submit",color:"primary",size:"lg"},"Save")},[Q]),ae=Object(s.useCallback)(function(){var t=Object(o.a)(i.a.mark(function t(a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),U(1),console.log(r),t.prev=3,!e.match.params.id){t.next=11;break}return t.next=7,Object(k.X)(e.match.params.id,r);case 7:U(0),w.b.success("Invoice Updated Successfully"),t.next=16;break;case 11:return t.next=13,Object(k.A)(r);case 13:U(0),w.b.success("Invoice Created Successfully"),S.a.push("/dashboard/supplier/invoices");case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(3),w.b.error("Something went wrong!"),U(0);case 22:case"end":return t.stop()}},t,null,[[3,18]])}));return function(e){return t.apply(this,arguments)}}(),[r,Q,U]);return u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement(p.a,null,u.a.createElement(E.a,null,e.match.params.id?u.a.createElement("b",null,"Edit Invoice"):u.a.createElement("b",null,"Create Invoice")),u.a.createElement(b.a,null,u.a.createElement(h.a,{method:"post",onSubmit:ae},u.a.createElement(f.a,null,u.a.createElement(y.a,{md:4},Y())),u.a.createElement(f.a,null,u.a.createElement(y.a,{md:4},u.a.createElement(m.a,null,u.a.createElement(_.a,{htmlFor:"invoice_number"},"Invoice#*"),u.a.createElement(v.a,{type:"text",name:"invoice_number",id:"invoice_number",value:r.invoice_number,onChange:H,required:!0})))),u.a.createElement(f.a,null,u.a.createElement(y.a,{md:4},u.a.createElement(m.a,null,u.a.createElement(_.a,{htmlFor:"invoice_date"},"Invoice Date*"),u.a.createElement(v.a,{type:"date",name:"invoice_date",id:"invoice_date",value:r.invoice_date,onChange:H,required:!0}))),u.a.createElement(y.a,{md:4},u.a.createElement(m.a,null,u.a.createElement(_.a,{htmlFor:"invoice_due_date"},"Invoice Due Date*"),u.a.createElement(v.a,{type:"date",name:"invoice_due_date",id:"invoice_due_date",value:r.invoice_due_date,onChange:H,required:!0})))),u.a.createElement("hr",null),u.a.createElement(f.a,null,u.a.createElement(y.a,{md:4},u.a.createElement(m.a,null,u.a.createElement(_.a,{htmlFor:"place_of_supply"},"Place of Supply"),u.a.createElement(v.a,{type:"text",name:"place_of_supply",id:"place_of_supply",value:r.place_of_supply,onChange:H})))),u.a.createElement(f.a,null,u.a.createElement(y.a,{md:4},u.a.createElement(m.a,null,u.a.createElement(_.a,{htmlFor:"service_month"},"Service Month"),u.a.createElement(v.a,{type:"text",name:"service_month",id:"service_month",value:r.service_month,onChange:H})))),u.a.createElement("hr",null),u.a.createElement(O.a,{className:"mt-3",striped:!0,responsive:!0},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Item Details"),u.a.createElement("th",null,"LR No."),u.a.createElement("th",null,"Vehicle No"),u.a.createElement("th",null,"Date"),u.a.createElement("th",null,"QTY"),u.a.createElement("th",null,"Rate"),u.a.createElement("th",null,"GST"),u.a.createElement("th",null,"Amount"),u.a.createElement("th",null,"Action"))),u.a.createElement("tbody",null,ee(),u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement(v.a,{type:"select",name:"invoice_transaction_desc",value:F.invoice_transaction_desc,onChange:K,placeholder:"Item Details",bsSize:"sm"},u.a.createElement("option",{value:"",defaultValue:!0},"Select Item"),B(R))),u.a.createElement("td",null,u.a.createElement(v.a,{type:"number",name:"invoice_transaction_lr",value:F.invoice_transaction_lr,onChange:K,bsSize:"sm"})),u.a.createElement("td",null,u.a.createElement(v.a,{type:"text",name:"invoice_transaction_vehicle",value:F.invoice_transaction_vehicle,onChange:K,bsSize:"sm"})),u.a.createElement("td",null,u.a.createElement(v.a,{type:"date",name:"invoice_transaction_date",value:F.invoice_transaction_date,onChange:K,bsSize:"sm"})),u.a.createElement("td",null,u.a.createElement(v.a,{type:"number",name:"invoice_transaction_qty",value:F.invoice_transaction_qty,bsSize:"sm",onChange:K})),u.a.createElement("td",null,u.a.createElement(v.a,{type:"number",name:"invoice_transaction_rate",value:F.invoice_transaction_rate,onChange:K,bsSize:"sm"})),u.a.createElement("td",null,u.a.createElement(v.a,{type:"number",name:"invoice_transaction_gst",value:F.invoice_transaction_gst,onChange:K,bsSize:"sm"})),u.a.createElement("td",null,u.a.createElement(v.a,{type:"number",name:"invoice_transaction_amount",value:W(F.invoice_transaction_qty,F.invoice_transaction_rate,F.invoice_transaction_gst),bsSize:"sm",disabled:!0})),u.a.createElement("td",null,u.a.createElement(d.a,{type:"button",title:"Add",onClick:Z,color:"success",size:"sm"},u.a.createElement(j.a,{icon:g.d})))))),u.a.createElement("hr",null),u.a.createElement(f.a,null,u.a.createElement(y.a,{md:4},u.a.createElement(m.a,null,u.a.createElement(_.a,{htmlFor:"company_notes"},"Company Notes"),u.a.createElement(v.a,{type:"textarea",name:"company_notes",id:"company_notes",value:r.company_notes,onChange:H})))),u.a.createElement(f.a,null,u.a.createElement(y.a,{md:4},u.a.createElement(m.a,null,u.a.createElement(_.a,{htmlFor:"terms_and_conditions"},"Terms and Conditions"),u.a.createElement(v.a,{type:"textarea",name:"terms_and_conditions",id:"terms_and_conditions",value:r.terms_and_conditions,onChange:H})))),u.a.createElement("hr",null),te()," ",u.a.createElement(C.a,{to:"/supplier/invoices"},u.a.createElement(d.a,{type:"button",color:"link",size:"lg"},"Cancel"))))))}}}]);
//# sourceMappingURL=40.b6b0807f.chunk.js.map