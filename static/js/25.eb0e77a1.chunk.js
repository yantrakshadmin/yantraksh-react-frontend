(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{110:function(e,t,n){"use strict";function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],a=!0,r=!1,c=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(l){r=!0,c=l}finally{try{a||null==o.return||o.return()}finally{if(r)throw c}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",function(){return a})},116:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(1),i=n.n(c),o=n(7),l=n.n(o),s=n(17),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var p=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},_=function(e){function t(){var n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,c=Array(r),i=0;i<r;i++)c[i]=arguments[i];return n=a=m(this,e.call.apply(e,[this].concat(c))),a.handleClick=function(e){if(a.props.onClick&&a.props.onClick(e),!e.defaultPrevented&&0===e.button&&!a.props.target&&!p(e)){e.preventDefault();var t=a.context.router.history,n=a.props,r=n.replace,c=n.to;r?t.replace(c):t.push(c)}},m(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,a=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["replace","to","innerRef"]);l()(this.context.router,"You should not use <Link> outside a <Router>"),l()(void 0!==t,'You must specify the "to" property');var c=this.context.router.history,i="string"===typeof t?Object(s.createLocation)(t,null,null,c.location):t,o=c.createHref(i);return r.a.createElement("a",u({},a,{onClick:this.handleClick,href:o,ref:n}))},t}(r.a.Component);_.propTypes={onClick:i.a.func,target:i.a.string,replace:i.a.bool,to:i.a.oneOfType([i.a.string,i.a.object]).isRequired,innerRef:i.a.oneOfType([i.a.string,i.a.func])},_.defaultProps={replace:!1},_.contextTypes={router:i.a.shape({history:i.a.shape({push:i.a.func.isRequired,replace:i.a.func.isRequired,createHref:i.a.func.isRequired}).isRequired}).isRequired},t.a=_},130:function(e,t,n){"use strict";var a=n(4),r=n(10),c=n(0),i=n.n(c),o=n(1),l=n.n(o),s=n(21),u=n.n(s),m=n(109),p={className:l.a.string,cssModule:l.a.object,size:l.a.string,bordered:l.a.bool,borderless:l.a.bool,striped:l.a.bool,dark:l.a.bool,hover:l.a.bool,responsive:l.a.oneOfType([l.a.bool,l.a.string]),tag:m.l,responsiveTag:m.l,innerRef:l.a.oneOfType([l.a.func,l.a.string,l.a.object])},_=function(e){var t=e.className,n=e.cssModule,c=e.size,o=e.bordered,l=e.borderless,s=e.striped,p=e.dark,_=e.hover,v=e.responsive,d=e.tag,b=e.responsiveTag,f=e.innerRef,h=Object(r.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),y=Object(m.h)(u()(t,"table",!!c&&"table-"+c,!!o&&"table-bordered",!!l&&"table-borderless",!!s&&"table-striped",!!p&&"table-dark",!!_&&"table-hover"),n),E=i.a.createElement(d,Object(a.a)({},h,{ref:f,className:y}));if(v){var O=Object(m.h)(!0===v?"table-responsive":"table-responsive-"+v,n);return i.a.createElement(b,{className:O},E)}return E};_.propTypes=p,_.defaultProps={tag:"table",responsiveTag:"div"},t.a=_},131:function(e,t,n){"use strict";var a=n(4),r=n(10),c=n(0),i=n.n(c),o=n(1),l=n.n(o),s=n(21),u=n.n(s),m=n(109),p={tag:m.l,className:l.a.string,cssModule:l.a.object},_=function(e){var t=e.className,n=e.cssModule,c=e.tag,o=Object(r.a)(e,["className","cssModule","tag"]),l=Object(m.h)(u()(t,"card-header"),n);return i.a.createElement(c,Object(a.a)({},o,{className:l}))};_.propTypes=p,_.defaultProps={tag:"div"},t.a=_},572:function(e,t,n){"use strict";n.r(t);var a=n(20),r=n(11),c=n(3),i=n.n(c),o=n(6),l=n(110),s=n(0),u=n.n(s),m=n(535),p=n(536),_=n(211),v=n(117),d=n(125),b=n(131),f=n(126),h=n(165),y=n(118),E=n(120),O=n(130),g=n(132),j=n(133),k=n(116),C=n(27),w=n(18),x=n(24);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.default=function(e){var t=Object(s.useState)({invoice_quiz:"",customer_name_id:"",invoice_number:"",invoice_date:"",invoice_due_date:"",place_of_supply:"",service_month:"",invoice_transactions:[],company_notes:"",terms_and_conditions:""}),n=Object(l.a)(t,2),c=n[0],S=n[1],z=Object(s.useState)({invoice_transaction_desc:"",invoice_transaction_lr:"",invoice_transaction_vehicle:"",invoice_transaction_date:"",invoice_transaction_qty:0,invoice_transaction_rate:0,invoice_transaction_gst:0,invoice_transaction_amount:0}),T=Object(l.a)(z,2),P=T[0],N=T[1];Object(s.useEffect)(function(){e.match.params.id&&function(){var t=Object(o.a)(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(C.mb)(e.match.params.id);case 2:(n=t.sent).customer_name?S({invoice_quiz:n.invoice_quiz,customer_name_id:n.customer_name.id,invoice_number:n.invoice_number,invoice_date:n.invoice_date,invoice_due_date:n.invoice_due_date,place_of_supply:n.place_of_supply,service_month:n.service_month,invoice_transactions:n.invoice_transactions,company_notes:n.company_notes,terms_and_conditions:n.terms_and_conditions}):n.invoice_quiz&&S({invoice_quiz:n.invoice_quiz,customer_name_id:n.customer_name,invoice_number:n.invoice_number,invoice_date:n.invoice_date,invoice_due_date:n.invoice_due_date,place_of_supply:n.place_of_supply,service_month:n.service_month,invoice_transactions:n.invoice_transactions,company_notes:n.company_notes,terms_and_conditions:n.terms_and_conditions});case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[]);var R=Object(s.useState)([]),D=Object(l.a)(R,2),I=D[0],F=D[1],A=Object(s.useState)([]),M=Object(l.a)(A,2),K=M[0],Y=M[1];Object(s.useEffect)(function(){var e=function(){var e=Object(o.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.W)();case 2:t=e.sent,F(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(o.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.Y)();case 2:t=e.sent,Y(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();e(),t()},[]);var L=Object(s.useState)(0),V=Object(l.a)(L,2),H=V[0],J=V[1],G=Object(s.useCallback)(function(e){if(e.length>0)return e.map(function(e){return u.a.createElement("option",{key:e.id,value:e.id},e.primary_contact," | ",e.company_name)})},[]),Q=Object(s.useCallback)(function(){return c.invoice_quiz?u.a.createElement(m.a,null,u.a.createElement(p.a,null,"Customer Name*"),u.a.createElement(_.a,{type:"text",value:"".concat(c.invoice_quiz.get_shipper.shipper_fname," ").concat(c.invoice_quiz.get_shipper.shipper_lname),disabled:!0})):u.a.createElement(m.a,null,u.a.createElement(p.a,{htmlFor:"customer_name_id"},"Customer Name*"),u.a.createElement(_.a,{type:"select",name:"customer_name_id",id:"customer_name_id",value:c.customer_name_id,onChange:W,required:!0},u.a.createElement("option",{value:"",defaultValue:!0},"Select Customer"),G(I)))},[c]),U=Object(s.useCallback)(function(e){if(e.length>0)return e.map(function(e){return u.a.createElement("option",{key:e.id,value:"".concat(e.name," | ").concat(e.type)},e.name," | ",e.type)})},[]),W=Object(s.useCallback)(function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;S(q({},c,Object(r.a)({},a,n)))},[c,S]),B=Object(s.useCallback)(function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;N(q({},P,Object(r.a)({},a,n)))},[P,N]),X=Object(s.useCallback)(function(e,t,n){return parseFloat(e)*parseFloat(t)+parseFloat(n)},[parseFloat]),Z=Object(s.useCallback)(Object(o.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=X(P.invoice_transaction_qty,P.invoice_transaction_rate,P.invoice_transaction_gst),S(q({},c,{invoice_transactions:[].concat(Object(a.a)(c.invoice_transactions),[q({},P,{invoice_transaction_amount:t})])})),N({invoice_transaction_desc:"",invoice_transaction_lr:0,invoice_transaction_vehicle:"",invoice_transaction_date:"",invoice_transaction_qty:0,invoice_transaction_rate:0,invoice_transaction_gst:0,invoice_transaction_amount:0});case 3:case"end":return e.stop()}},e)})),[c,S,P,N]),$=Object(s.useCallback)(function(){var e=Object(o.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S(q({},c,"id"in t?{invoice_transactions:c.invoice_transactions.filter(function(e){return e.id!==t.id})}:{invoice_transactions:c.invoice_transactions.filter(function(e){return e.cp_name!==t.cp_name})}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[c,S]),ee=Object(s.useCallback)(function(){if(c.invoice_transactions)return c.invoice_transactions.map(function(e,t){return u.a.createElement("tr",{key:t},u.a.createElement("td",null,e.invoice_transaction_desc),u.a.createElement("td",null,e.invoice_transaction_lr),u.a.createElement("td",null,e.invoice_transaction_vehicle),u.a.createElement("td",null,e.invoice_transaction_date),u.a.createElement("td",null,e.invoice_transaction_qty),u.a.createElement("td",null,e.invoice_transaction_rate),u.a.createElement("td",null,e.invoice_transaction_gst),u.a.createElement("td",null,e.invoice_transaction_amount),u.a.createElement("td",null,u.a.createElement(v.a,{type:"button",title:"Delete Item",onClick:function(){return $(e)},color:"danger",size:"sm"},u.a.createElement(g.a,{icon:j.a}))))})},[c]),te=Object(s.useCallback)(function(){return 1===H?u.a.createElement(v.a,{color:"primary",size:"lg",disabled:!0},u.a.createElement("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})," Saving"):u.a.createElement(v.a,{type:"submit",color:"primary",size:"lg"},"Save")},[H]),ne=Object(s.useCallback)(function(){var t=Object(o.a)(i.a.mark(function t(n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),J(1),console.log(c),t.prev=3,!e.match.params.id){t.next=11;break}return t.next=7,Object(C.T)(e.match.params.id,c);case 7:J(0),w.b.success("Invoice Updated Successfully"),t.next=16;break;case 11:return t.next=13,Object(C.z)(c);case 13:J(0),w.b.success("Invoice Created Successfully"),x.a.push("/dashboard/supplier/invoices");case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(3),w.b.error("Something went wrong!"),J(0);case 22:case"end":return t.stop()}},t,null,[[3,18]])}));return function(e){return t.apply(this,arguments)}}(),[c,H,J]);return u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement(d.a,null,u.a.createElement(b.a,null,e.match.params.id?u.a.createElement("b",null,"Edit Invoice"):u.a.createElement("b",null,"Create Invoice")),u.a.createElement(f.a,null,u.a.createElement(h.a,{method:"post",onSubmit:ne},u.a.createElement(y.a,null,u.a.createElement(E.a,{md:4},Q())),u.a.createElement(y.a,null,u.a.createElement(E.a,{md:4},u.a.createElement(m.a,null,u.a.createElement(p.a,{htmlFor:"invoice_number"},"Invoice#*"),u.a.createElement(_.a,{type:"text",name:"invoice_number",id:"invoice_number",value:c.invoice_number,onChange:W,required:!0})))),u.a.createElement(y.a,null,u.a.createElement(E.a,{md:4},u.a.createElement(m.a,null,u.a.createElement(p.a,{htmlFor:"invoice_date"},"Invoice Date*"),u.a.createElement(_.a,{type:"date",name:"invoice_date",id:"invoice_date",value:c.invoice_date,onChange:W,required:!0}))),u.a.createElement(E.a,{md:4},u.a.createElement(m.a,null,u.a.createElement(p.a,{htmlFor:"invoice_due_date"},"Invoice Due Date*"),u.a.createElement(_.a,{type:"date",name:"invoice_due_date",id:"invoice_due_date",value:c.invoice_due_date,onChange:W,required:!0})))),u.a.createElement("hr",null),u.a.createElement(y.a,null,u.a.createElement(E.a,{md:4},u.a.createElement(m.a,null,u.a.createElement(p.a,{htmlFor:"place_of_supply"},"Place of Supply"),u.a.createElement(_.a,{type:"text",name:"place_of_supply",id:"place_of_supply",value:c.place_of_supply,onChange:W})))),u.a.createElement(y.a,null,u.a.createElement(E.a,{md:4},u.a.createElement(m.a,null,u.a.createElement(p.a,{htmlFor:"service_month"},"Service Month"),u.a.createElement(_.a,{type:"text",name:"service_month",id:"service_month",value:c.service_month,onChange:W})))),u.a.createElement("hr",null),u.a.createElement(O.a,{className:"mt-3",striped:!0,responsive:!0},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Item Details"),u.a.createElement("th",null,"LR No."),u.a.createElement("th",null,"Vehicle No"),u.a.createElement("th",null,"Date"),u.a.createElement("th",null,"QTY"),u.a.createElement("th",null,"Rate"),u.a.createElement("th",null,"GST"),u.a.createElement("th",null,"Amount"),u.a.createElement("th",null,"Action"))),u.a.createElement("tbody",null,ee(),u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement(_.a,{type:"select",name:"invoice_transaction_desc",value:P.invoice_transaction_desc,onChange:B,placeholder:"Item Details",bsSize:"sm"},u.a.createElement("option",{value:"",defaultValue:!0},"Select Item"),U(K))),u.a.createElement("td",null,u.a.createElement(_.a,{type:"number",name:"invoice_transaction_lr",value:P.invoice_transaction_lr,onChange:B,bsSize:"sm"})),u.a.createElement("td",null,u.a.createElement(_.a,{type:"text",name:"invoice_transaction_vehicle",value:P.invoice_transaction_vehicle,onChange:B,bsSize:"sm"})),u.a.createElement("td",null,u.a.createElement(_.a,{type:"date",name:"invoice_transaction_date",value:P.invoice_transaction_date,onChange:B,bsSize:"sm"})),u.a.createElement("td",null,u.a.createElement(_.a,{type:"number",name:"invoice_transaction_qty",value:P.invoice_transaction_qty,bsSize:"sm",onChange:B})),u.a.createElement("td",null,u.a.createElement(_.a,{type:"number",name:"invoice_transaction_rate",value:P.invoice_transaction_rate,onChange:B,bsSize:"sm"})),u.a.createElement("td",null,u.a.createElement(_.a,{type:"number",name:"invoice_transaction_gst",value:P.invoice_transaction_gst,onChange:B,bsSize:"sm"})),u.a.createElement("td",null,u.a.createElement(_.a,{type:"number",name:"invoice_transaction_amount",value:X(P.invoice_transaction_qty,P.invoice_transaction_rate,P.invoice_transaction_gst),bsSize:"sm",disabled:!0})),u.a.createElement("td",null,u.a.createElement(v.a,{type:"button",title:"Add",onClick:Z,color:"success",size:"sm"},u.a.createElement(g.a,{icon:j.c})))))),u.a.createElement("hr",null),u.a.createElement(y.a,null,u.a.createElement(E.a,{md:4},u.a.createElement(m.a,null,u.a.createElement(p.a,{htmlFor:"company_notes"},"Company Notes"),u.a.createElement(_.a,{type:"textarea",name:"company_notes",id:"company_notes",value:c.company_notes,onChange:W})))),u.a.createElement(y.a,null,u.a.createElement(E.a,{md:4},u.a.createElement(m.a,null,u.a.createElement(p.a,{htmlFor:"terms_and_conditions"},"Terms and Conditions"),u.a.createElement(_.a,{type:"textarea",name:"terms_and_conditions",id:"terms_and_conditions",value:c.terms_and_conditions,onChange:W})))),u.a.createElement("hr",null),te()," ",u.a.createElement(k.a,{to:"/supplier/invoices"},u.a.createElement(v.a,{type:"button",color:"link",size:"lg"},"Cancel"))))))}}}]);
//# sourceMappingURL=25.eb0e77a1.chunk.js.map