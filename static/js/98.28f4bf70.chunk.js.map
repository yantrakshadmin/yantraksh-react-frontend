{"version":3,"sources":["screens/supplier/masters/customers.js"],"names":["Action","_ref","customer","customers","setCustomers","_useState","useState","_useState2","Object","_Users_faisal_Desktop_yantraksh_yantraksh_react_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","modal","setModal","toggle","useCallback","deleteCustomer","_Users_faisal_Desktop_yantraksh_yantraksh_react_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_faisal_Desktop_yantraksh_yantraksh_react_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","wrap","_context","prev","next","deleteMasterCustomer","id","filter","e","toast","success","concat","name","t0","error","stop","react__WEBPACK_IMPORTED_MODULE_3___default","createElement","react_router_dom__WEBPACK_IMPORTED_MODULE_14__","to","reactstrap__WEBPACK_IMPORTED_MODULE_4__","color","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_15__","icon","faPencilAlt","onClick","faTrashAlt","reactstrap__WEBPACK_IMPORTED_MODULE_5__","isOpen","reactstrap__WEBPACK_IMPORTED_MODULE_6__","reactstrap__WEBPACK_IMPORTED_MODULE_7__","reactstrap__WEBPACK_IMPORTED_MODULE_8__","CustomersTable","_ref3","renderCustomersRows","length","map","i","key","company_name","customer_type","reactstrap__WEBPACK_IMPORTED_MODULE_9__","hover","className","Customers","_useState3","_useState4","useEffect","_ref4","_callee2","customersData","_context2","fetchMasterCustomers","sent","console","log","apply","this","arguments","loadCustomersData","reactstrap__WEBPACK_IMPORTED_MODULE_10__","reactstrap__WEBPACK_IMPORTED_MODULE_11__","reactstrap__WEBPACK_IMPORTED_MODULE_12__","reactstrap__WEBPACK_IMPORTED_MODULE_13__","sm","faPlus"],"mappings":"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","file":"static/js/98.28f4bf70.chunk.js","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Card, CardBody, Button, Table, Row, Col, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus, faPencilAlt, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\nimport { fetchMasterCustomers, deleteMasterCustomer } from '../../../helpers/api';\nimport { toast } from 'react-toastify';\n\n\nconst Action = ({ customer, customers, setCustomers }) => {\n\n    const [modal, setModal] = useState(false);\n\n    const toggle = useCallback(\n        () => {\n            setModal(!modal);\n        },\n        [modal, setModal]\n    )\n\n    const deleteCustomer = useCallback(\n        async () => {\n            try {\n                await deleteMasterCustomer(customer.id);\n                await setCustomers(customers.filter(e => e.id !== customer.id));\n                toggle();\n                toast.success(`${customer.name} deleted!`);\n            } catch (err) {\n                toggle();\n                toast.error(\"Something went wrong\");\n            }\n        },\n        [customer, customers, setCustomers, toggle]\n    )\n\n    return (\n        <div>\n            <Link to={`/masters/customers/edit/${customer.id}`}>\n                <Button color=\"primary\"><FontAwesomeIcon icon={faPencilAlt} /></Button>{\" \"}\n            </Link>\n            <Button onClick={toggle} color=\"danger\"><FontAwesomeIcon icon={faTrashAlt} /></Button>{\" \"}\n            <Modal isOpen={modal} toggle={toggle}>\n                <ModalHeader toggle={toggle}>Delete {customer.name}?</ModalHeader>\n                <ModalBody>\n                    Are you sure you want to permanently delete {customer.name}?\n            </ModalBody>\n                <ModalFooter>\n                    <Button color=\"danger\" onClick={deleteCustomer}>Delete</Button>{' '}\n                    <Button color=\"link\" onClick={toggle}>Cancel</Button>\n                </ModalFooter>\n            </Modal>\n        </div>\n    );\n}\n\nconst CustomersTable = ({ customers, setCustomers }) => {\n\n    const renderCustomersRows = useCallback(\n        () => {\n            if (customers.length > 0) {\n                return customers.map(i => {\n                    return (\n                        <tr key={i.id}>\n                            <td>{i.company_name}</td>\n                            <td>{i.customer_type}</td>\n                            <td><Action customer={i} customers={customers} setCustomers={setCustomers} /></td>\n                        </tr>\n                    );\n                });\n            }\n            return <div>No Data</div>;\n        }\n    )\n\n    return (\n        <Table hover className=\"mt-3\">\n            <thead>\n                <tr>\n                    <th>Company Name</th>\n                    <th>Type</th>\n                    <th>Action</th>\n                </tr>\n            </thead>\n            <tbody>\n                {renderCustomersRows()}\n            </tbody>\n        </Table>\n    );\n}\n\nconst Customers = () => {\n\n    const [customers, setCustomers] = useState([]);\n\n    useEffect(() => {\n        const loadCustomersData = async () => {\n            const customersData = await fetchMasterCustomers();\n            console.log(customersData)\n            setCustomers(customersData);\n        }\n        loadCustomersData();\n    }, [setCustomers,])\n\n    return (\n        <div className=\"animated fadeIn\">\n            <Card>\n                <CardBody>\n                    <Row>\n                        <Col sm={6}>\n                            <h3>Customers</h3>\n                        </Col>\n                        <Col sm={6} className=\"text-right\">\n                            <Link to=\"/masters/customers/add\">\n                                <Button color=\"primary\"><FontAwesomeIcon icon={faPlus} /> Add Customer</Button>\n                            </Link>\n                        </Col>\n                    </Row>\n\n                    <CustomersTable customers={customers} setCustomers={setCustomers} />\n\n                </CardBody>\n            </Card>\n        </div>\n    )\n}\n\nexport default Customers;"],"sourceRoot":""}