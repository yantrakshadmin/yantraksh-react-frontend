{"version":3,"sources":["screens/supplier/invoices.js"],"names":["Action","_ref","invoice","invoices","setInvoices","_useState","useState","_useState2","Object","_home_ashertoufeeq_Desktop_Yantraksh_yantraksh_react_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","modal","setModal","toggle","useCallback","deleteInvoice","_home_ashertoufeeq_Desktop_Yantraksh_yantraksh_react_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_ashertoufeeq_Desktop_Yantraksh_yantraksh_react_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","wrap","_context","prev","next","deleteSupplierInvoice","id","filter","e","toast","success","concat","name","t0","error","stop","react__WEBPACK_IMPORTED_MODULE_3___default","createElement","react_router_dom__WEBPACK_IMPORTED_MODULE_14__","to","reactstrap__WEBPACK_IMPORTED_MODULE_4__","color","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_15__","icon","faPencilAlt","faPrint","onClick","faTrashAlt","reactstrap__WEBPACK_IMPORTED_MODULE_5__","isOpen","reactstrap__WEBPACK_IMPORTED_MODULE_6__","invoice_number","reactstrap__WEBPACK_IMPORTED_MODULE_7__","reactstrap__WEBPACK_IMPORTED_MODULE_8__","InvoicesTable","_ref3","renderInvoiceCustomerName","i","customer_name","primary_contact","company_name","invoice_quiz","get_shipper","shipper_fname","shipper_lname","renderItemsRows","length","map","key","console","log","reactstrap__WEBPACK_IMPORTED_MODULE_9__","hover","className","Invoices","props","_useState3","_useState4","useEffect","_ref4","_callee2","invoicesData","_context2","fetchSupplierInvoices","sent","apply","this","arguments","loadInvoicesData","reactstrap__WEBPACK_IMPORTED_MODULE_10__","reactstrap__WEBPACK_IMPORTED_MODULE_11__","reactstrap__WEBPACK_IMPORTED_MODULE_12__","reactstrap__WEBPACK_IMPORTED_MODULE_13__","sm","faPlus"],"mappings":"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","file":"static/js/91.98d35e24.chunk.js","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Card, CardBody, Button, Table, Row, Col, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus, faPencilAlt, faTrashAlt, faPrint } from '@fortawesome/free-solid-svg-icons';\nimport { fetchSupplierInvoices, deleteSupplierInvoice } from '../../helpers/api';\nimport { toast } from 'react-toastify';\n\n\nconst Action = ({ invoice, invoices, setInvoices }) => {\n\n    const [modal, setModal] = useState(false);\n\n    const toggle = useCallback(\n        () => {\n            setModal(!modal);\n        },\n        [modal, setModal]\n    )\n\n    const deleteInvoice = useCallback(\n        async () => {\n            try {\n                await deleteSupplierInvoice(invoice.id);\n                await setInvoices(invoices.filter(e => e.id !== invoice.id));\n                toggle();\n                toast.success(`${invoice.name} deleted!`);\n            } catch (err) {\n                toggle();\n                toast.error(\"Something went wrong\");\n            }\n        },\n        [invoice, invoices, setInvoices, toggle]\n    )\n\n    return (\n        <div>\n            <Link to={`/supplier/invoices/edit/${invoice.id}`}>\n                <Button color=\"primary\"><FontAwesomeIcon icon={faPencilAlt} /></Button>{\" \"}\n            </Link>\n            <Link to={`/supplier/invoices/print/${invoice.id}`}>\n                <Button color=\"primary\"><FontAwesomeIcon icon={faPrint} /></Button>{\" \"}\n            </Link>\n            <Button onClick={toggle} color=\"danger\"><FontAwesomeIcon icon={faTrashAlt} /></Button>{\" \"}\n            <Modal isOpen={modal} toggle={toggle}>\n                <ModalHeader toggle={toggle}>Delete {invoice.invoice_number}?</ModalHeader>\n                <ModalBody>\n                    Are you sure you want to permanently delete {invoice.invoice_number}?\n            </ModalBody>\n                <ModalFooter>\n                    <Button color=\"danger\" onClick={deleteInvoice}>Delete</Button>{' '}\n                    <Button color=\"link\" onClick={toggle}>Cancel</Button>\n                </ModalFooter>\n            </Modal>\n        </div>\n    );\n}\n\nconst InvoicesTable = ({ invoices, setInvoices }) => {\n\n\n    const renderInvoiceCustomerName = useCallback(\n        i => {\n            if (i.customer_name) {\n                return <td>{`${i.customer_name.primary_contact} | ${i.customer_name.company_name}`}</td>\n            } else if (i.invoice_quiz) {\n                return <td>{`${i.invoice_quiz.get_shipper.shipper_fname} ${i.invoice_quiz.get_shipper.shipper_lname}`}</td>\n            }\n        }\n    )\n\n    const renderItemsRows = useCallback(\n        () => {\n            if (invoices.length > 0) {\n                return invoices.map(i => {\n                    return (\n                        <tr key={i.id}>\n                            <td>{i.invoice_number}</td>\n                            {renderInvoiceCustomerName(i)}\n                            {console.log(i)}\n                            <td><Action invoice={i} invoices={invoices} setInvoices={setInvoices} /></td>\n                        </tr>\n                    )\n                })\n            }\n            return <div>No Data</div>;\n        },\n        [invoices, setInvoices]\n    )\n\n    return (\n        <Table hover className=\"mt-3\">\n            <thead>\n                <tr>\n                    <th>Invoice#</th>\n                    <th>Customer</th>\n                    <th>Action</th>\n                </tr>\n            </thead>\n            <tbody>\n                {renderItemsRows()}\n            </tbody>\n        </Table>\n    );\n}\n\nconst Invoices = props => {\n\n    const [invoices, setInvoices] = useState([]);\n\n    useEffect(() => {\n        const loadInvoicesData = async () => {\n            const invoicesData = await fetchSupplierInvoices();\n            setInvoices(invoicesData);\n        }\n        loadInvoicesData();\n    }, [])\n\n    return (\n        <div className=\"animated fadeIn\">\n            <Card>\n                <CardBody>\n                    <Row>\n                        <Col sm={6}>\n                            <h3>Invoices</h3>\n                        </Col>\n                        <Col sm={6} className=\"text-right\">\n                            <Link to=\"/supplier/invoice/create\">\n                                <Button color=\"primary\"><FontAwesomeIcon icon={faPlus} /> Create Invoice</Button>\n                            </Link>\n                        </Col>\n                    </Row>\n\n                    <InvoicesTable invoices={invoices} setInvoices={setInvoices} />\n\n                </CardBody>\n            </Card>\n        </div>\n    )\n}\n\nexport default Invoices;"],"sourceRoot":""}